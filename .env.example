# =============================================================================
# Zentity Docker Compose Environment Variables
# =============================================================================
# Copy this file to .env and update the values.
# This file is for docker-compose. For local dev (bun run dev), see apps/web/.env.example

# =============================================================================
# REQUIRED - Build will fail without these
# =============================================================================

# Better Auth Secret - REQUIRED for Docker builds and runtime
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=

# =============================================================================
# RECOMMENDED - For production/security
# =============================================================================

# Service-to-service authentication token
# If set, frontend will authenticate with FHE/OCR services using X-Zentity-Internal-Token
# Generate with: openssl rand -base64 32
INTERNAL_SERVICE_TOKEN=

# FHE service request body limit (MB)
# Needed for large TFHE server key registration payloads.
FHE_BODY_LIMIT_MB=64

# =============================================================================
# ON-CHAIN ATTESTATION (optional - demo mode works without these)
# =============================================================================

# Demo Mode - test attestation UI without deployed contracts
# Set to "true" for development, "false" when you have deployed contracts
NEXT_PUBLIC_ATTESTATION_DEMO=true

# WalletConnect/Reown Project ID
# Get one at https://cloud.reown.com (optional for localhost, required for production)
NEXT_PUBLIC_PROJECT_ID=
# Optional AppKit toggles
NEXT_PUBLIC_APPKIT_ENABLE_INJECTED=true
NEXT_PUBLIC_APPKIT_ENABLE_WALLETCONNECT=true
NEXT_PUBLIC_APPKIT_ENABLE_EIP6963=true
NEXT_PUBLIC_APPKIT_INCLUDE_WALLETS=
# Enable AppKit debug logging in the browser console
NEXT_PUBLIC_APPKIT_DEBUG=false

# Network feature flags
NEXT_PUBLIC_ENABLE_FHEVM=false
NEXT_PUBLIC_ENABLE_HARDHAT=false

# -----------------------------------------------------------------------------
# Registrar Wallet (server-side signing for attestations)
# -----------------------------------------------------------------------------
# Private key for the registrar wallet that signs attestation transactions.
# Generate with: cast wallet new
# WARNING: Never commit actual private keys to version control!
REGISTRAR_PRIVATE_KEY=

# -----------------------------------------------------------------------------
# fhEVM Network Configuration
# -----------------------------------------------------------------------------
# RPC URLs (defaults work for Sepolia testnet)
FHEVM_RPC_URL=https://ethereum-sepolia-rpc.publicnode.com
NEXT_PUBLIC_FHEVM_RPC_URL=https://ethereum-sepolia-rpc.publicnode.com
FHEVM_NETWORK_ID=fhevm_sepolia
NEXT_PUBLIC_FHEVM_NETWORK_ID=fhevm_sepolia
FHEVM_CHAIN_ID=11155111
NEXT_PUBLIC_FHEVM_CHAIN_ID=11155111
FHEVM_NETWORK_NAME="fhEVM (Sepolia)"
NEXT_PUBLIC_FHEVM_NETWORK_NAME="fhEVM (Sepolia)"
FHEVM_EXPLORER_URL=https://sepolia.etherscan.io
NEXT_PUBLIC_FHEVM_EXPLORER_URL=https://sepolia.etherscan.io
# Provider implementation (zama | mock)
# zama = Zama relayer SDK (current FHEVM provider on Sepolia)
FHEVM_PROVIDER_ID=zama
NEXT_PUBLIC_FHEVM_PROVIDER_ID=zama

# Relayer SDK + relayer URL (Zama testnet)
NEXT_PUBLIC_FHEVM_ZAMA_SDK_URL=https://cdn.zama.org/relayer-sdk-js/0.3.0-6/relayer-sdk-js.umd.cjs
FHEVM_RELAYER_URL=https://relayer.testnet.zama.org
NEXT_PUBLIC_FHEVM_RELAYER_URL=https://relayer.testnet.zama.org

# FHEVM Infrastructure (Zama Sepolia - fixed addresses, do not change)
FHEVM_GATEWAY_CHAIN_ID=10901
NEXT_PUBLIC_FHEVM_GATEWAY_CHAIN_ID=10901
FHEVM_ACL_CONTRACT_ADDRESS=0xf0Ffdc93b7E186bC2f8CB3dAA75D86d1930A433D
NEXT_PUBLIC_FHEVM_ACL_CONTRACT_ADDRESS=0xf0Ffdc93b7E186bC2f8CB3dAA75D86d1930A433D
FHEVM_KMS_CONTRACT_ADDRESS=0xbE0E383937d564D7FF0BC3b46c51f0bF8d5C311A
NEXT_PUBLIC_FHEVM_KMS_CONTRACT_ADDRESS=0xbE0E383937d564D7FF0BC3b46c51f0bF8d5C311A
FHEVM_INPUT_VERIFIER_CONTRACT_ADDRESS=0xBBC1fFCdc7C316aAAd72E807D9b0272BE8F84DA0
NEXT_PUBLIC_FHEVM_INPUT_VERIFIER_CONTRACT_ADDRESS=0xBBC1fFCdc7C316aAAd72E807D9b0272BE8F84DA0
FHEVM_DECRYPTION_ADDRESS=0x5D8BD78e2ea6bbE41f26dFe9fdaEAa349e077478
NEXT_PUBLIC_FHEVM_DECRYPTION_ADDRESS=0x5D8BD78e2ea6bbE41f26dFe9fdaEAa349e077478
FHEVM_INPUT_VERIFICATION_ADDRESS=0x483b9dE06E4E4C7D35CCf5837A1668487406D955
NEXT_PUBLIC_FHEVM_INPUT_VERIFICATION_ADDRESS=0x483b9dE06E4E4C7D35CCf5837A1668487406D955

# Contract addresses (get these after deploying zentity-fhevm-contracts)
FHEVM_IDENTITY_REGISTRY=0x05c6FB879BbF0Cab2B0206523583F94E49Ba62e2
FHEVM_COMPLIANCE_RULES=0x78dE340fc7A6ba470a5dD8b0a5f5933cD48dC164
FHEVM_COMPLIANT_ERC20=0x2CBEF5Da4F16346bBb34C3D7a81bFC0D9882c711

# -----------------------------------------------------------------------------
# Local Development (Hardhat)
# -----------------------------------------------------------------------------
LOCAL_RPC_URL=http://127.0.0.1:8545
LOCAL_IDENTITY_REGISTRY=0x5FbDB2315678afecb367f032d93F642f64180aa3
LOCAL_COMPLIANCE_RULES=0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
LOCAL_COMPLIANT_ERC20=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9

# =============================================================================
# OPTIONAL - Defaults work for most cases
# =============================================================================

# Better Auth URL (public URL of your frontend)
BETTER_AUTH_URL=http://localhost:3000

# Debug flags (set to 1 to enable)
NEXT_PUBLIC_LIVENESS_DEBUG=0

# Relying Party redirect allowlist (OAuth-style flow)
# Comma-separated list of EXACT redirect URIs allowed for /api/rp/authorize
# Example: http://localhost:4000/callback,https://partner.example.com/zentity/callback
RP_ALLOWED_REDIRECT_URIS=
